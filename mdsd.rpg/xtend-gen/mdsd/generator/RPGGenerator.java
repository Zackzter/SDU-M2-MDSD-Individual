/**
 * generated by Xtext 2.21.0
 */
package mdsd.generator;

import com.google.common.base.Objects;
import com.google.common.collect.Iterators;
import java.util.Arrays;
import mdsd.rPG.ActualNumbers;
import mdsd.rPG.Add;
import mdsd.rPG.AltAttribute;
import mdsd.rPG.And;
import mdsd.rPG.Attribute;
import mdsd.rPG.Attributes;
import mdsd.rPG.BEffect;
import mdsd.rPG.Bigger;
import mdsd.rPG.BiggerEq;
import mdsd.rPG.Buff;
import mdsd.rPG.Comparator;
import mdsd.rPG.Death;
import mdsd.rPG.Declaration;
import mdsd.rPG.Div;
import mdsd.rPG.Effect;
import mdsd.rPG.Effects;
import mdsd.rPG.Entities;
import mdsd.rPG.Entity;
import mdsd.rPG.Eq;
import mdsd.rPG.FloatNum;
import mdsd.rPG.IntNum;
import mdsd.rPG.Loc;
import mdsd.rPG.Locations;
import mdsd.rPG.MEffect;
import mdsd.rPG.Move;
import mdsd.rPG.MoveE;
import mdsd.rPG.Moves;
import mdsd.rPG.Mult;
import mdsd.rPG.NEq;
import mdsd.rPG.NameAttribute;
import mdsd.rPG.NumberComparing;
import mdsd.rPG.Or;
import mdsd.rPG.Proposition;
import mdsd.rPG.Relations;
import mdsd.rPG.Require;
import mdsd.rPG.Self;
import mdsd.rPG.Smaller;
import mdsd.rPG.SmallerEq;
import mdsd.rPG.Speed;
import mdsd.rPG.Sub;
import mdsd.rPG.Sum;
import mdsd.rPG.SystemRPG;
import mdsd.rPG.Target;
import mdsd.rPG.Team;
import mdsd.rPG.Teams;
import mdsd.rPG.Type;
import mdsd.rPG.TypeExpression;
import org.eclipse.emf.common.util.EList;
import org.eclipse.emf.ecore.resource.Resource;
import org.eclipse.xtend2.lib.StringConcatenation;
import org.eclipse.xtext.generator.AbstractGenerator;
import org.eclipse.xtext.generator.IFileSystemAccess2;
import org.eclipse.xtext.generator.IGeneratorContext;

/**
 * Generates code from your model files on save.
 * 
 * See https://www.eclipse.org/Xtext/documentation/303_runtime_concepts.html#code-generation
 */
@SuppressWarnings("all")
public class RPGGenerator extends AbstractGenerator {
  @Override
  public void doGenerate(final Resource resource, final IFileSystemAccess2 fsa, final IGeneratorContext context) {
    final SystemRPG result = Iterators.<SystemRPG>filter(resource.getAllContents(), SystemRPG.class).next();
    this.main(result, fsa);
  }
  
  public void main(final SystemRPG systemRPG, final IFileSystemAccess2 fsa) {
    final String classFileName = systemRPG.getName();
    EList<Declaration> _declarations = systemRPG.getDeclarations();
    for (final Declaration declaration : _declarations) {
      boolean _matched = false;
      if (declaration instanceof Locations) {
        _matched=true;
        this.generateLocations(fsa, ((Locations)declaration));
      }
      if (!_matched) {
        if (declaration instanceof Relations) {
          _matched=true;
          this.generateTypes(fsa, ((Relations)declaration));
        }
      }
      if (!_matched) {
        if (declaration instanceof Moves) {
          _matched=true;
          this.generateMoves(fsa, ((Moves)declaration));
        }
      }
      if (!_matched) {
        if (declaration instanceof Entities) {
          _matched=true;
          this.generateEntities(fsa, ((Entities)declaration));
        }
      }
      if (!_matched) {
        if (declaration instanceof Teams) {
          _matched=true;
          this.generateTeams(fsa, ((Teams)declaration));
        }
      }
      if (!_matched) {
        if (declaration instanceof Attributes) {
          _matched=true;
          this.generateAttributes(fsa, ((Attributes)declaration));
        }
      }
      if (!_matched) {
        if (declaration instanceof Death) {
          _matched=true;
          fsa.generateFile("DeathChecker.java", this.generateDeathChecker(((Death)declaration)));
        }
      }
      if (!_matched) {
        if (declaration instanceof Effects) {
          _matched=true;
          this.generateEffectFiles(fsa, ((Effects)declaration));
        }
      }
      if (!_matched) {
        if (declaration instanceof Speed) {
          _matched=true;
          fsa.generateFile("Speed.java", this.generateSpeed(((Speed)declaration)));
        }
      }
      if (!_matched) {
        System.out.println("This is not a supported instance of Declaration");
      }
    }
    fsa.generateFile((classFileName + ".java"), this.generateGame(classFileName));
    fsa.generateFile("Runner.java", this.generateRunner(classFileName));
  }
  
  public CharSequence generateSpeed(final Speed speed) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("public class Speed implements Comparator<Entity> {");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private Map<Entity, Number> entitySpeed;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private Type type = Type.getInstance();");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private List<String> strongTypes;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public Speed(Map<Entity, Number> entitySpeed){");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.entitySpeed = entitySpeed;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public Speed(){}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public");
    {
      boolean _checkSpeedValue = this.checkSpeedValue(speed);
      if (_checkSpeedValue) {
        _builder.append(" int ");
      } else {
        _builder.append(" float ");
      }
    }
    _builder.append("getSpeed(Entity entity, String terrain){");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t");
    _builder.append("HashMap<String, Number> eData = new HashMap<>();");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("for(AttributeData aData : entity.getAttributes()){");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("eData.put(aData.getAttributeName(), aData.getNumber());");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("try{");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("return checkType(entity, eData.get(\"");
    String _name = speed.getSpeedValue().getName();
    _builder.append(_name, "\t\t\t");
    _builder.append("\")");
    CharSequence _numValue = this.numValue(speed);
    _builder.append(_numValue, "\t\t\t");
    _builder.append(", terrain);");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t");
    _builder.append("} catch(NullPointerException e){");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("System.out.println(\"The target seems to have no speed\");");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("return 0;");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("    ");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public");
    {
      boolean _checkSpeedValue_1 = this.checkSpeedValue(speed);
      if (_checkSpeedValue_1) {
        _builder.append(" int ");
      } else {
        _builder.append(" float ");
      }
    }
    _builder.append("checkType(Entity entity, int speed, String terrain){");
    _builder.newLineIfNotEmpty();
    _builder.append("        ");
    _builder.append("strongTypes = type.getTypeRelations().get(terrain).getStrongAgainst();");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("if(entity.getType().equals(terrain)) return speed *2;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("else if(strongTypes.contains(entity.getType())) return speed / 2;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return speed;\t");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("} ");
    _builder.newLine();
    _builder.append("    ");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("@Override");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public int compare(Entity o1, Entity o2) {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("if (entitySpeed.get(o1)");
    CharSequence _numValue_1 = this.numValue(speed);
    _builder.append(_numValue_1, "        ");
    _builder.append(" >= entitySpeed.get(o2)");
    CharSequence _numValue_2 = this.numValue(speed);
    _builder.append(_numValue_2, "        ");
    _builder.append(") {");
    _builder.newLineIfNotEmpty();
    _builder.append("            ");
    _builder.append("return -1;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("} else {");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("return 1;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("} // returning 0 would merge keys");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public Map<Entity, Number> getEntitySpeed(){");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return this.entitySpeed;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    return _builder;
  }
  
  public boolean checkSpeedValue(final Speed speed) {
    if (((speed.getSpeedValue() instanceof IntNum) || Objects.equal(speed.getSpeedValue().getAVal().getLTypes(), "Integer"))) {
      return true;
    }
    return false;
  }
  
  public CharSequence numValue(final Speed speed) {
    StringConcatenation _builder = new StringConcatenation();
    {
      boolean _checkSpeedValue = this.checkSpeedValue(speed);
      if (_checkSpeedValue) {
        _builder.append(".intValue()");
      } else {
        _builder.append(".floatValue()");
      }
    }
    _builder.newLineIfNotEmpty();
    return _builder;
  }
  
  public CharSequence generateRunner(final String name) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("public class Runner {");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public static void main(String[] args) {");
    _builder.newLine();
    _builder.append("    \t");
    _builder.append(name, "    \t");
    _builder.append(" ");
    String _lowerCase = name.toLowerCase();
    _builder.append(_lowerCase, "    \t");
    _builder.append(" = new ");
    _builder.append(name, "    \t");
    _builder.append("();");
    _builder.newLineIfNotEmpty();
    _builder.append("    \t");
    String _lowerCase_1 = name.toLowerCase();
    _builder.append(_lowerCase_1, "    \t");
    _builder.append(".run();");
    _builder.newLineIfNotEmpty();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateDeathChecker(final Death death) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.append("public class DeathChecker {");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public boolean check(Entity entity){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("HashMap<String, Number> eData = new HashMap<>();");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("for(AttributeData aData : entity.getAttributes()){");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("eData.put(aData.getAttributeName(), aData.getNumber());");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("try{");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("return (");
    CharSequence _new_re = this.new_re(death.getReq());
    _builder.append(_new_re, "\t\t\t");
    _builder.append(");");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t");
    _builder.append("} catch(NullPointerException e){");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("System.out.println(\"The target seems to be invincible.\");");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("return false;");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateGame(final String classFileName) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("public class ");
    _builder.append(classFileName);
    _builder.append("{");
    _builder.newLineIfNotEmpty();
    _builder.append("\t");
    _builder.append("private Type type;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private List<Entity> entities;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private Team team;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private Move move;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private MoveInit moveInit;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private EntityInit entityInit;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private TeamInit teamInit;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private TypeRelationsInit typeRelationsInit;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private LocationsInit locationsInit;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private Location location;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private DeathChecker deathChecker;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private Random random;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private Speed speed;");
    _builder.newLine();
    _builder.append("    ");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private boolean gameFinished;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private boolean won = false;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private boolean lost = false;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private Scanner s;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private Entity targetEntity;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private Map<String, Entity> playerNameID;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private Map<String, Entity> enemyNameID;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private List<Entity> enemyTeam;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private Map<Entity, Map<Entity, String>> moveQueue;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private Map<Entity, String> targetMap;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private List<String> targetList;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private Map<Entity, Number> entitySpeed;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private Map<Entity, Number> treeSpeed;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private Speed sortedSpeed;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private String terrainType;");
    _builder.newLine();
    _builder.append("    ");
    _builder.newLine();
    _builder.append("    ");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public ");
    _builder.append(classFileName, "    ");
    _builder.append("(){");
    _builder.newLineIfNotEmpty();
    _builder.append("    \t");
    _builder.append("entities = new ArrayList<>();");
    _builder.newLine();
    _builder.append("    \t");
    _builder.append("type = Type.getInstance();");
    _builder.newLine();
    _builder.append("      \t");
    _builder.append("team = new Team();    \t");
    _builder.newLine();
    _builder.append("    \t");
    _builder.append("move = Move.getInstance();");
    _builder.newLine();
    _builder.append("    \t");
    _builder.append("location = Location.getInstance();");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("deathChecker = new DeathChecker();");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("speed = new Speed();");
    _builder.newLine();
    _builder.append("    \t");
    _builder.append("moveInit = new MoveInit();");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("entityInit = new EntityInit();");
    _builder.newLine();
    _builder.append("    \t");
    _builder.append("teamInit = new TeamInit();");
    _builder.newLine();
    _builder.append("    \t");
    _builder.append("locationsInit = new LocationsInit();");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("typeRelationsInit = new TypeRelationsInit();");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("s = new Scanner(System.in);");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("random = new Random();");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("entitySpeed = new HashMap<>();");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("playerNameID = new HashMap<>();");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("enemyNameID = new HashMap<>();");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("moveQueue = new HashMap<>();");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("sortedSpeed = new Speed(entitySpeed);");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("treeSpeed = new TreeMap<>(sortedSpeed);");
    _builder.newLine();
    _builder.append("   \t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("   \t");
    _builder.newLine();
    _builder.append("   \t");
    _builder.append("public void run(){");
    _builder.newLine();
    _builder.append("   \t\t");
    _builder.append("initialize();");
    _builder.newLine();
    _builder.append("   \t\t");
    _builder.append("gameLoop();");
    _builder.newLine();
    _builder.append("   \t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("   \t");
    _builder.newLine();
    _builder.append("   \t");
    _builder.append("private void initialize(){");
    _builder.newLine();
    _builder.append("   \t\t");
    _builder.append("moveInit.addMoves(move);");
    _builder.newLine();
    _builder.append("   \t\t");
    _builder.append("entityInit.createEntities(entities);");
    _builder.newLine();
    _builder.append("   \t\t");
    _builder.append("teamInit.createTeams(team, entities);");
    _builder.newLine();
    _builder.append("   \t\t");
    _builder.append("typeRelationsInit.createRelations(type);");
    _builder.newLine();
    _builder.append("   \t\t");
    _builder.append("locationsInit.addLocations(location);");
    _builder.newLine();
    _builder.append("\t   ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t   ");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private void reffereceMap(List<Entity> entities, Map<String, Entity> entityMap){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("int entitiesLeft = team.getTeamSize();");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("if(entities.size() < team.getTeamSize()) entitiesLeft = entities.size();");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("for (int i = 0; i < entitiesLeft; i++) {");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("Entity currentEntity = entities.remove(0);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("System.out.println(\"name: \" + currentEntity);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("if(entityMap.get(currentEntity.getName()) == null){");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("entityMap.put(currentEntity.getName(), currentEntity);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("else{");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("for(i=2; i < entitiesLeft + 2; i++){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("String extendedName = currentEntity.getName() + i;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("if(entityMap.get(extendedName) == null){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("entityMap.put(extendedName, currentEntity);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("break;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("   \t");
    _builder.newLine();
    _builder.append("   \t");
    _builder.append("private void gameLoop(){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("reffereceMap(team.getPlayerTeam(), playerNameID);");
    _builder.newLine();
    _builder.newLine();
    _builder.append("   \t\t");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("while (!gameFinished) {");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("if(won){");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("gameFinished = true;");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("System.out.println(\"You Won!\");");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}else if(lost){");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("gameFinished = true;");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("System.out.println(\"You Lost.\");");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}else{");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("// Get current location to fight at");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("for(LocationData locationD : location.getLocations()){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("System.out.println(location.getLocations().remove(0));");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("String currentLocation = locationD.getLocationName();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("String enemyTeamName = locationD.getTeam();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("String terrain = locationD.getTerrain().getName();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("terrainType = locationD.getTerrain().getType();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("enemyTeam = team.getTeamByName(enemyTeamName);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("System.out.println(\"Current Location: \" + currentLocation + \", fighting against: \" + enemyTeamName + \".\\nTerrain is: \" + terrain);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("processGame();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("if((location.getLocations().isEmpty()) && !lost){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("won = true;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("break;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t   ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("   \t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("   \t");
    _builder.newLine();
    _builder.append("   \t");
    _builder.append("private void processGame(){");
    _builder.newLine();
    _builder.append("   \t\t");
    _builder.append("while(enemyTeam.size() > 0 && !lost){");
    _builder.newLine();
    _builder.append("   \t\t\t");
    _builder.append("//Entity enemyEntity = enemyTeam.remove(0);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("//currentEnemyTeam.add(enemyEntity);");
    _builder.newLine();
    _builder.append("   \t\t\t");
    _builder.append("reffereceMap(enemyTeam, enemyNameID);");
    _builder.newLine();
    _builder.append("   \t\t\t");
    _builder.append("fight();");
    _builder.newLine();
    _builder.append("   \t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("   \t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("   \t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private void executeBuffMove(Move move, String moveName, Entity target){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("if(!move.getMove(moveName).getBuffEffects().isEmpty()){");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("for(EffectBuff buffEffect: move.getMove(moveName).getBuffEffects()){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("buffEffect.doEffect(move, moveName, target);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private void executeMove(Move move, String moveName, Entity target, Entity user){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("if(!move.getMove(moveName).getMoveEffects().isEmpty()){");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("for(EffectMove moveEffect: move.getMove(moveName).getMoveEffects()){");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("moveEffect.doEffect(move, moveName, target, user);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t\t\t   \t");
    _builder.newLine();
    _builder.append("   \t\t");
    _builder.newLine();
    _builder.append("   \t");
    _builder.append("private void fight(){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("boolean fighting = true;");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("Entity currentEntity;");
    _builder.newLine();
    _builder.append("   \t\t");
    _builder.append("while(fighting){");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("System.out.println(\"You are against \" + enemyNameID.keySet() + \" choose your move\");");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("for(String entityName : playerNameID.keySet()){");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("currentEntity = playerNameID.get(entityName);");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("//entitySpeed.put(currentEntity, speed.getSpeed(currentEntity));");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("entitySpeed.put(currentEntity, speed.getSpeed(currentEntity, terrainType));");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("//treeSpeed.put(currentEntity, speed.getSpeed(currentEntity));");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("List<String> moves = currentEntity.getMoveNameList();");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("System.out.println(moves);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("//List<String> moves = playerEntity.getMoveNameList();");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("boolean pickMove = true;");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("while (pickMove){  ");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("String moveName = s.nextLine();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("// Will check that the user picks a move which exists");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("if(moves.contains(moveName)){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("boolean pickTeam = true;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("//List<Entity> chosenTeam = null;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("while(pickTeam){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("System.out.println(\"What team do you want to target: enemy or self\");");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("String targetTeam = s.nextLine();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("boolean pickTarget = true;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("if(targetTeam.equals(\"enemy\")){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("System.out.println(\"The enemy targets are: \" + enemyNameID.keySet());");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("//chosenTeam = currentEnemyTeam;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("pickTeam = false;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("while(pickTarget){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t");
    _builder.append("String target = s.nextLine();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t");
    _builder.append("if(enemyNameID.keySet().contains(target)){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t");
    _builder.append("//if(currentEnemyTeam.toString().contains(target)){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t");
    _builder.append("for(String targetEnemy : enemyNameID.keySet()){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t\t");
    _builder.append("System.out.println(\"name \" + targetEnemy);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t\t");
    _builder.append("if(targetEnemy.equals(target)){ ");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t\t\t");
    _builder.append("targetEntity = enemyNameID.get(target);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t\t\t");
    _builder.append("break;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t");
    _builder.append("//currentEnemyTeam.forEach(targetEnemy ->{ if(targetEnemy.getName().equals(target)){targetEntity = targetEnemy;}});");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t");
    _builder.append("pickTarget = false;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t");
    _builder.append("else{");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t");
    _builder.append("System.out.println(\"Not a possible target.\");");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("else if(targetTeam.equals(\"self\")){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("System.out.println(\"Your team is: \" + playerNameID.keySet());");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("//chosenTeam = battleEntities;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("pickTeam = false;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("while(pickTarget){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t");
    _builder.append("String target = s.nextLine();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t");
    _builder.append("if(playerNameID.keySet().contains(target)){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t");
    _builder.append("for(String targetSelf : playerNameID.keySet()){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t\t");
    _builder.append("if(targetSelf.equals(target)) targetEntity = playerNameID.get(target);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t\t");
    _builder.append("break;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t");
    _builder.append("//if(battleEntities.toString().contains(target)){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t");
    _builder.append("// battleEntities.forEach(targetSelf ->{ if(targetSelf.getName().equals(target)){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t");
    _builder.append("// \ttargetEntity = targetSelf;}});");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t");
    _builder.append("pickTarget = false;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t");
    _builder.append("else{");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t\t");
    _builder.append("System.out.println(\"Not a possible target.\");");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("else{");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t\t");
    _builder.append("System.out.println(\"Not a team.\");");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("targetMap = new HashMap<>();");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("targetMap.put(targetEntity, moveName);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("moveQueue.put(currentEntity, targetMap);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("// System.out.println(\"You used \"+ moveName + \"\\n\");");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("// executeBuffMove(move, moveName, playerEntity);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("// executeMove(move, moveName, targetEntity, playerEntity); TODO::: USE MOVE SOMEWHERE ELSE");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("pickMove = !pickMove;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("}else{");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("System.out.println(\"That\'s not a possible move!\");");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("for(String enemyName : enemyNameID.keySet()){");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("currentEntity = enemyNameID.get(enemyName);");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("entitySpeed.put(currentEntity, speed.getSpeed(currentEntity, terrainType));");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("//treeSpeed.put(currentEntity, speed.getSpeed(currentEntity));");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("int choosenMove = random.nextInt(currentEntity.getMoveNameList().size());");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("String moveName = currentEntity.getMoveNameList().get(choosenMove);");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("targetList = new ArrayList<>(playerNameID.keySet());");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("targetEntity = playerNameID.get(targetList.get(random.nextInt(targetList.size())));");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("targetMap = new HashMap<>();");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("targetMap.put(targetEntity, moveName);");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("moveQueue.put(currentEntity, targetMap);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// if(deathChecker.check(targetEntity)){");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \tSystem.out.println(targetEntity.getName() + \" is dead!\");");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \ttargetEntity.setEntityState(EntityState.DEAD);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \tcurrentEnemyTeam.remove(targetEntity);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \tenemyNameID.remove(targetEntity.getName());");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \treturn;");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// }else{");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \t//System.out.println(\"Enemy Turn...\");");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \tint choosenMove = random.nextInt(enemyEntity.getMoveNameList().size());");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \tSystem.out.println(enemyEntity.getName() + \" used \" + enemyEntity.getMoveNameList().get(choosenMove) + \"\\n\");");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \texecuteBuffMove(move, enemyEntity.getMoveNameList().get(choosenMove), enemyEntity);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \texecuteMove(move, enemyEntity.getMoveNameList().get(choosenMove), playerEntity, enemyEntity);");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \tif(deathChecker.check(playerEntity)){");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \t\tSystem.out.println(\"Your \" + playerEntity.getName() + \" is dead\");");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \t\tplayerEntity.setEntityState(EntityState.DEAD);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \t\tplayerNameID.remove(playerEntity.getName()); //TODO:: FIX");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \t\tbattleEntities.remove(playerEntity);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \t\t// Will add the next player entity to the fight, if there are no more, it will go to game over");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \t\tif(!team.getPlayerTeam().isEmpty()){");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \t\t\t// playerEntity = team.getPlayerTeam().remove(0);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \t\t\t// battleEntities.add(playerEntity);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \t\t\treffereceMap(team.getPlayerTeam(), playerNameID);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \t\t}else{");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \t\t\tlost = true;");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \t\t\treturn;");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \t\t}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// \t}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("// }");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("System.out.println(moveQueue);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("System.out.println(entitySpeed);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("System.out.println(\"------------\");");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("treeSpeed.putAll(entitySpeed);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("System.out.println(treeSpeed);");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("for(Entity fightingEntity : treeSpeed.keySet()){");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("String moveName = \"\";");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("for(Entity target : moveQueue.get(fightingEntity).keySet()){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("targetEntity = target;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("moveName = moveQueue.get(fightingEntity).get(target);");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("if(playerNameID.containsValue(targetEntity)){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("useMove(playerNameID, fightingEntity, targetEntity, moveName);");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("else if(enemyNameID.containsValue(targetEntity)){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("useMove(enemyNameID, fightingEntity, targetEntity, moveName);");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("else{");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("System.out.println(\"You missed...\");");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("moveQueue.clear();");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("entitySpeed.clear();");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("treeSpeed.clear();");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("for(String entityName : playerNameID.keySet()){");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("if(playerNameID.get(entityName).getEntityState().equals(EntityState.DEAD)){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("playerNameID.remove(entityName);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("if(!team.getPlayerTeam().isEmpty())\treffereceMap(team.getPlayerTeam(), playerNameID);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("else if(playerNameID.isEmpty()){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("lost = true;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t\t");
    _builder.append("return;");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("for(String entityName : enemyNameID.keySet()){");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("if(enemyNameID.get(entityName).getEntityState().equals(EntityState.DEAD)){");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("enemyNameID.remove(entityName);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("if(!enemyTeam.isEmpty()) reffereceMap(enemyTeam, enemyNameID);");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.append("else if(enemyNameID.isEmpty()) return;");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("   \t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t   ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t   ");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private void useMove(Map<String, Entity> nameID, Entity fightingEntity, Entity targetEntity, String moveName){");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("System.out.println(fightingEntity.getName() + \" uses \" + moveName);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("executeBuffMove(move, moveName, fightingEntity);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("executeMove(move, moveName, targetEntity, fightingEntity);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("if(deathChecker.check(targetEntity)){");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("targetEntity.setEntityState(EntityState.DEAD);");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("System.out.println(targetEntity.getName() + \" is dead!\");");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("treeSpeed.remove(targetEntity);");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("//nameID.values().remove(targetEntity);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public void generateAttributes(final IFileSystemAccess2 fsa, final Attributes attributes) {
    fsa.generateFile("AttributeEnum.java", this.generateAttributeEnum(attributes));
    fsa.generateFile("AttributeData.java", this.generateAttributeData());
  }
  
  public CharSequence generateAttribute() {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("public class Attribute {");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private List<AttributeData> attributes = new ArrayList<>();");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private static Attribute attribute;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private Attribute() {");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public static Attribute getInstance() {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("if (attribute == null) {");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("attribute = new Attribute();");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return attribute;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public void addAttribute(AttributeData attribute) {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("attributes.add(attribute);");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("    ");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public List<AttributeData> getAttributes() {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return attributes;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateAttributeChangeEvent() {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("public class AttributeChangeEvent{");
    _builder.newLine();
    _builder.append("  ");
    _builder.append("private AttributeData previousState;");
    _builder.newLine();
    _builder.append("  ");
    _builder.append("private AttributeData targetState;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("  ");
    _builder.append("public AttributeChangeEvent(AttributeData previousState, AttributeData targetState){");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("this.previousState = previousState;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("this.targetState = targetState;");
    _builder.newLine();
    _builder.append("  ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("  ");
    _builder.append("public AttributeData getTargetState(){");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("return this.targetState;");
    _builder.newLine();
    _builder.append("  ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("  ");
    _builder.append("public AttributeData getPreviousState(){");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("return this.previousState;");
    _builder.newLine();
    _builder.append("  ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateAttributeData() {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.append("public class AttributeData {");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private Number number;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private String attributeName;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public AttributeData() {");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public AttributeData(String attributeName, Number number) {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.number = number;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.attributeName = attributeName;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public Number getNumber() {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return this.number;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public void setNumber(Number number){");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.number = number;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public String getAttributeName() {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return this.attributeName;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public void setAttributeName(String attributeName) {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.attributeName = attributeName;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("@Override");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public String toString() {");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("return this.number.toString();");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateAttributeEnum(final Attributes attributes) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("public enum AttributeEnum{");
    _builder.newLine();
    {
      EList<Attribute> _attribute = attributes.getAttribute();
      for(final Attribute attribute : _attribute) {
        String _name = attribute.getName();
        _builder.append(_name);
        _builder.append(",");
        _builder.newLineIfNotEmpty();
      }
    }
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public void generateEffectFiles(final IFileSystemAccess2 fsa, final Effects effects) {
    String buffClasses = "";
    String moveEClasses = "";
    EList<Effect> _effect = effects.getEffect();
    for (final Effect effect : _effect) {
      boolean _matched = false;
      if (effect instanceof Buff) {
        _matched=true;
        String _buffClasses = buffClasses;
        CharSequence _generateBuffEffectFile = this.generateBuffEffectFile(((Buff)effect));
        buffClasses = (_buffClasses + _generateBuffEffectFile);
      }
      if (!_matched) {
        if (effect instanceof MoveE) {
          _matched=true;
          String _moveEClasses = moveEClasses;
          CharSequence _generateMoveEffectFile = this.generateMoveEffectFile(((MoveE)effect));
          moveEClasses = (_moveEClasses + _generateMoveEffectFile);
        }
      }
    }
    this.addEveryEffect(fsa, buffClasses, moveEClasses);
  }
  
  public void addEveryEffect(final IFileSystemAccess2 fsa, final String buffClasses, final String moveEClasses) {
    fsa.generateFile("EffectBuff.java", this.generateEffectBuff(buffClasses));
    fsa.generateFile("EffectMove.java", this.generateEffectMove(moveEClasses));
  }
  
  public CharSequence generateEffectMove(final String moveEClasses) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.append("public abstract class EffectMove {");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("protected Map<String, Number> eData;");
    _builder.newLine();
    _builder.append("    ");
    _builder.newLine();
    _builder.append("    ");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public abstract boolean effectMove(Move move, String name, Entity enemy);");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public abstract Map<String, Number> changeMove(Move move, String name, Entity enemy);");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public abstract void doEffect(Move move, String name, Entity enemy, Entity player);");
    _builder.newLine();
    _builder.append("    ");
    _builder.newLine();
    _builder.append("    ");
    _builder.newLine();
    _builder.append("    ");
    _builder.append(moveEClasses, "    ");
    _builder.append("    \t");
    _builder.newLineIfNotEmpty();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateEffectBuff(final String buffClasses) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.append("public abstract class EffectBuff {");
    _builder.newLine();
    _builder.append("\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("protected Map<String, Number> eData;");
    _builder.newLine();
    _builder.append("\t");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public abstract boolean effectBuff(Move move, String name, Entity player);");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public abstract Map<String, Number> changeBuff(Move move, String name, Entity player);");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public abstract void doEffect(Move move, String name, Entity player);  ");
    _builder.newLine();
    _builder.append("    ");
    _builder.newLine();
    _builder.append("    ");
    _builder.append(buffClasses, "    ");
    _builder.append("  \t");
    _builder.newLineIfNotEmpty();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateBuffEffectFile(final Buff buff) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("public static class ");
    String _name = buff.getName();
    _builder.append(_name);
    _builder.append(" extends EffectBuff{");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("@Override");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public boolean effectBuff(Move move, String name, Entity player){");
    _builder.newLine();
    {
      Proposition _or = buff.getRule().getOr();
      boolean _tripleNotEquals = (_or != null);
      if (_tripleNotEquals) {
        _builder.append("\t\t");
        _builder.append("eData = new HashMap<>();");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append("for(AttributeData playerData : player.getAttributes()){");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append("\t");
        _builder.append("eData.put(playerData.getAttributeName(), playerData.getNumber());");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append("}\t\t\t");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append("for(AttributeData aData : move.getMove(name).getMoveAttributes()){");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append("\t");
        _builder.append("eData.put(aData.getAttributeName(), aData.getNumber());\t\t\t\t");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append("}\t\t\t\t\t");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append("return ");
        CharSequence _new_logic = this.new_logic(buff.getRule().getOr());
        _builder.append(_new_logic, "\t\t");
        _builder.append(";");
        _builder.newLineIfNotEmpty();
      } else {
        _builder.append("\t\t");
        _builder.append("return true;\t\t\t\t\t");
        _builder.newLine();
      }
    }
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t");
    _builder.append("@Override");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public Map<String, Number> changeBuff(Move move, String name, Entity player){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("eData = new HashMap<>();");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("for(AttributeData playerData : player.getAttributes()){");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("eData.put(playerData.getAttributeName(), playerData.getNumber());");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}\t\t\t");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("for(AttributeData aData : move.getMove(name).getMoveAttributes()){");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("eData.put(aData.getAttributeName(), aData.getNumber());\t\t\t\t");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("return eData;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t");
    _builder.append("@Override\t\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public void doEffect(Move move, String name, Entity player){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("if(effectBuff(move, name, player)){");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("eData = changeBuff(move, name, player);");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("for(AttributeData aData : player.getAttributes()){");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.newLine();
    {
      EList<Target> _target = buff.getRule().getTarget();
      for(final Target change : _target) {
        _builder.append("\t\t\t\t");
        _builder.append("if(aData.getAttributeName() == \"");
        String _name_1 = change.getTarget().getName();
        _builder.append(_name_1, "\t\t\t\t");
        _builder.append("\"){");
        _builder.newLineIfNotEmpty();
        _builder.append("\t\t\t\t");
        _builder.append("\t");
        _builder.append("aData.setNumber(");
        CharSequence _new_exp = this.new_exp(change.getSum());
        _builder.append(_new_exp, "\t\t\t\t\t");
        _builder.append(");");
        _builder.newLineIfNotEmpty();
        _builder.append("\t\t\t\t");
        _builder.append("\t");
        _builder.append("System.out.println(player.getName() + \"\'(s) \"  + aData.getAttributeName() + \" is now: \" + aData.getNumber());\t\t\t\t\t\t\t\t\t");
        _builder.newLine();
        _builder.append("\t\t\t\t");
        _builder.append("\t");
        _builder.append("break;");
        _builder.newLine();
        _builder.append("\t\t\t\t");
        _builder.append("}");
        _builder.newLine();
        _builder.append("\t\t\t\t");
        _builder.newLine();
      }
    }
    _builder.append("\t\t\t\t\t");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("for(AttributeData aData : move.getMove(name).getMoveAttributes()){");
    _builder.newLine();
    {
      EList<Target> _target_1 = buff.getRule().getTarget();
      for(final Target change_1 : _target_1) {
        _builder.append("\t\t\t\t");
        _builder.append("if(aData.getAttributeName() == \"");
        String _name_2 = change_1.getTarget().getName();
        _builder.append(_name_2, "\t\t\t\t");
        _builder.append("\"){");
        _builder.newLineIfNotEmpty();
        _builder.append("\t\t\t\t");
        _builder.append("\t");
        _builder.append("aData.setNumber(");
        CharSequence _new_exp_1 = this.new_exp(change_1.getSum());
        _builder.append(_new_exp_1, "\t\t\t\t\t");
        _builder.append(");");
        _builder.newLineIfNotEmpty();
        _builder.append("\t\t\t\t");
        _builder.append("\t");
        _builder.append("System.out.println(player.getName() + \"\'(s) \"  + aData.getAttributeName() + \" is now: \" + aData.getNumber());");
        _builder.newLine();
        _builder.append("\t\t\t\t");
        _builder.append("\t");
        _builder.newLine();
        _builder.append("\t\t\t\t");
        _builder.append("}");
        _builder.newLine();
      }
    }
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}\t\t\t\t\t\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateMoveEffectFile(final MoveE moveE) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("public static class ");
    String _name = moveE.getName();
    _builder.append(_name);
    _builder.append(" extends EffectMove{");
    _builder.newLineIfNotEmpty();
    _builder.append("\t\t\t\t\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("@Override");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public boolean effectMove(Move move, String name, Entity enemy){");
    _builder.newLine();
    {
      Proposition _or = moveE.getRule().getOr();
      boolean _tripleNotEquals = (_or != null);
      if (_tripleNotEquals) {
        _builder.append("\t\t");
        _builder.append("eData = new HashMap<>();");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append("for(AttributeData enemyData : enemy.getAttributes()){");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append("\t");
        _builder.append("eData.put(enemyData.getAttributeName(), enemyData.getNumber());");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append("}\t\t\t");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append("for(AttributeData aData : move.getMove(name).getMoveAttributes()){");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append("\t");
        _builder.append("eData.put(aData.getAttributeName(), aData.getNumber());\t\t\t\t");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append("}\t\t\t\t\t");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append("return ");
        CharSequence _new_logic = this.new_logic(moveE.getRule().getOr());
        _builder.append(_new_logic, "\t\t");
        _builder.append(";");
        _builder.newLineIfNotEmpty();
      } else {
        _builder.append("\t\t");
        _builder.append("return true;\t\t\t\t\t");
        _builder.newLine();
      }
    }
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("@Override");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public Map<String, Number> changeMove(Move move, String name, Entity enemy){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("eData = new HashMap<>();");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("for(AttributeData enemyData : enemy.getAttributes()){");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("eData.put(enemyData.getAttributeName(), enemyData.getNumber());");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}\t\t\t");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("for(AttributeData aData : move.getMove(name).getMoveAttributes()){");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("eData.put(aData.getAttributeName(), aData.getNumber());\t\t\t\t");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("return eData;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t");
    _builder.append("@Override\t\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public void doEffect(Move move, String name, Entity enemy, Entity player){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("if(effectMove(move, name, player)){");
    _builder.newLine();
    {
      boolean _isEmpty = moveE.getRule().getChange().getTarget().isEmpty();
      boolean _not = (!_isEmpty);
      if (_not) {
        _builder.append("\t\t\t");
        _builder.append("eData = changeMove(move, name, enemy);");
        _builder.newLine();
        _builder.append("\t\t\t");
        _builder.append("for(AttributeData aData : enemy.getAttributes()){");
        _builder.newLine();
        _builder.append("\t\t\t");
        _builder.append("\t");
        _builder.newLine();
        {
          EList<Target> _target = moveE.getRule().getChange().getTarget();
          for(final Target change : _target) {
            _builder.append("\t\t\t");
            _builder.append("\t");
            _builder.append("if(aData.getAttributeName() == \"");
            String _name_1 = change.getTarget().getName();
            _builder.append(_name_1, "\t\t\t\t");
            _builder.append("\"){");
            _builder.newLineIfNotEmpty();
            _builder.append("\t\t\t");
            _builder.append("\t");
            _builder.append("\t");
            _builder.append("eData = changeMove(move, name, enemy);");
            _builder.newLine();
            _builder.append("\t\t\t");
            _builder.append("\t");
            _builder.append("\t");
            _builder.newLine();
            _builder.append("\t\t\t");
            _builder.append("\t");
            _builder.append("\t");
            _builder.append("aData.setNumber(");
            CharSequence _new_exp = this.new_exp(change.getSum());
            _builder.append(_new_exp, "\t\t\t\t\t");
            _builder.append(");");
            _builder.newLineIfNotEmpty();
            _builder.append("\t\t\t");
            _builder.append("\t");
            _builder.append("\t");
            _builder.append("System.out.println(enemy.getName() + \"\'(s) \"  + aData.getAttributeName() + \" is now: \" + aData.getNumber());");
            _builder.newLine();
            _builder.newLine();
            _builder.append("\t\t\t");
            _builder.append("\t");
            _builder.append("}");
            _builder.newLine();
            _builder.append("\t\t\t");
            _builder.append("\t");
            _builder.append("\t");
            _builder.newLine();
          }
        }
        _builder.newLine();
        _builder.append("\t\t\t");
        _builder.append("}");
        _builder.newLine();
      }
    }
    {
      boolean _isEmpty_1 = moveE.getRule().getChange().getSelfT().isEmpty();
      boolean _not_1 = (!_isEmpty_1);
      if (_not_1) {
        _builder.append("\t\t\t");
        _builder.append("eData = changeMove(move, name, player);");
        _builder.newLine();
        _builder.append("\t\t\t");
        _builder.append("for(AttributeData aData : player.getAttributes()){");
        _builder.newLine();
        {
          EList<Self> _selfT = moveE.getRule().getChange().getSelfT();
          for(final Self change_1 : _selfT) {
            _builder.append("\t\t\t");
            _builder.append("\t");
            _builder.append("if(aData.getAttributeName() == \"");
            String _name_2 = change_1.getTarget().getName();
            _builder.append(_name_2, "\t\t\t\t");
            _builder.append("\"){");
            _builder.newLineIfNotEmpty();
            _builder.append("\t\t\t");
            _builder.append("\t");
            _builder.append("\t");
            _builder.append("aData.setNumber(");
            CharSequence _new_exp_1 = this.new_exp(change_1.getSum());
            _builder.append(_new_exp_1, "\t\t\t\t\t");
            _builder.append(");");
            _builder.newLineIfNotEmpty();
            _builder.append("\t\t\t");
            _builder.append("\t");
            _builder.append("\t");
            _builder.append("System.out.println(player.getName() + \"\'(s) \"  + aData.getAttributeName() + \" is now: \" + aData.getNumber());");
            _builder.newLine();
            _builder.newLine();
            _builder.append("\t\t\t");
            _builder.append("\t");
            _builder.append("}\t\t\t\t\t\t\t");
            _builder.newLine();
          }
        }
        _builder.append("\t\t\t");
        _builder.append("}");
        _builder.newLine();
      }
    }
    _builder.append("\t\t");
    _builder.append("}\t\t\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public void generateEntities(final IFileSystemAccess2 fsa, final Entities entities) {
    fsa.generateFile("Entity.java", this.generateEntity());
    fsa.generateFile("EntityEnum.java", this.generateEntityEnum(entities));
    fsa.generateFile("EntityState.java", this.generateEntityState());
    fsa.generateFile("EntityInit.java", this.generateEntityInit(entities));
  }
  
  public CharSequence generateEntity() {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.append("public class Entity{");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private String name;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private String type;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private EntityState state;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private List<AttributeData> attribute;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private List<MoveData> moves;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public Entity(){");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("attribute = new ArrayList<>();");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("moves = new ArrayList<>();");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public Entity(Entity e){");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("this();");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("this.name = e.getName();");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("this.type = e.getType();");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("this.state = e.getEntityState();");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("if(!e.getAttributes().isEmpty())");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.attribute.addAll(e.getAttributes());");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("if(!e.getMoveData().isEmpty())");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.moves.addAll(e.getMoveData());");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public String getName(){");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("return this.name;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public void setName(String name){");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("this.name = name;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public String getType(){");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("return this.type;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public void setType(String type){");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("this.type = type;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public List<AttributeData> getAttributes(){");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("return attribute;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public EntityState getEntityState(){");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("return state;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public void setEntityState(EntityState state){");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("this.state = state;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public void addAttribute(AttributeData attribute){");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("this.attribute.add(attribute);");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public List<MoveData> getMoveData(){");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("return moves;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public List<String> getMoveNameList(){");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("List<String> moveNames = new ArrayList<>();");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("for (MoveData moveData : getMoveData()) {");
    _builder.newLine();
    _builder.append("          ");
    _builder.append("moveNames.add(moveData.getMoveName());");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("return moveNames;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("    ");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public void addMoveData(MoveData moveData){");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("moves.add(moveData);");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("    ");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("@Override");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public String toString() {");
    _builder.newLine();
    _builder.append("      ");
    _builder.append("return this.name.toString();");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("    ");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateEntityEnum(final Entities entities) {
    CharSequence _xblockexpression = null;
    {
      String entityEnum = "";
      int i = 1;
      EList<Entity> _entity = entities.getEntity();
      for (final Entity entity : _entity) {
        {
          String _entityEnum = entityEnum;
          String _name = entity.getName();
          entityEnum = (_entityEnum + _name);
          int _size = entities.getEntity().size();
          boolean _lessThan = (i < _size);
          if (_lessThan) {
            String _entityEnum_1 = entityEnum;
            entityEnum = (_entityEnum_1 + ", ");
            i++;
          } else {
            String _entityEnum_2 = entityEnum;
            entityEnum = (_entityEnum_2 + ";");
          }
        }
      }
      StringConcatenation _builder = new StringConcatenation();
      _builder.append("enum EntityEnum{");
      _builder.newLine();
      _builder.append("\t");
      _builder.append(entityEnum, "\t");
      _builder.newLineIfNotEmpty();
      _builder.append("}");
      _builder.newLine();
      _xblockexpression = _builder;
    }
    return _xblockexpression;
  }
  
  public CharSequence generateEntityState() {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("public enum EntityState {");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("DEAD, ALIVE");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateEntityInit(final Entities entities) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("public class EntityInit{");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public void createEntities(List<Entity> entities){");
    _builder.newLine();
    {
      EList<Entity> _entity = entities.getEntity();
      for(final Entity entity : _entity) {
        _builder.append("\t\t");
        _builder.append("Entity ");
        String _lowerCase = entity.getName().toLowerCase();
        _builder.append(_lowerCase, "\t\t");
        _builder.append(" = new Entity();");
        _builder.newLineIfNotEmpty();
        _builder.append("\t\t");
        String _lowerCase_1 = entity.getName().toLowerCase();
        _builder.append(_lowerCase_1, "\t\t");
        _builder.append(".setName(\"");
        String _name = entity.getName();
        _builder.append(_name, "\t\t");
        _builder.append("\");");
        _builder.newLineIfNotEmpty();
        _builder.append("\t\t");
        String _lowerCase_2 = entity.getName().toLowerCase();
        _builder.append(_lowerCase_2, "\t\t");
        _builder.append(".setType(\"");
        String _name_1 = entity.getEType().getType().getName();
        _builder.append(_name_1, "\t\t");
        _builder.append("\");");
        _builder.newLineIfNotEmpty();
        _builder.append("\t\t");
        String _lowerCase_3 = entity.getName().toLowerCase();
        _builder.append(_lowerCase_3, "\t\t");
        _builder.append(".setEntityState(EntityState.ALIVE);");
        _builder.newLineIfNotEmpty();
        {
          EList<Move> _move = entity.getEMoves().getMove();
          for(final Move move : _move) {
            _builder.append("\t\t");
            String _lowerCase_4 = entity.getName().toLowerCase();
            _builder.append(_lowerCase_4, "\t\t");
            _builder.append(".addMoveData(Move.getInstance().getMove(\"");
            String _name_2 = move.getName();
            _builder.append(_name_2, "\t\t");
            _builder.append("\"));");
            _builder.newLineIfNotEmpty();
          }
        }
        {
          EList<AltAttribute> _att = entity.getAtt();
          for(final AltAttribute att : _att) {
            _builder.append("\t\t");
            String _lowerCase_5 = entity.getName().toLowerCase();
            _builder.append(_lowerCase_5, "\t\t");
            _builder.append(".addAttribute(new AttributeData(\"");
            String _name_3 = att.getAttribute().getName();
            _builder.append(_name_3, "\t\t");
            _builder.append("\", ");
            Number _numberValue = this.getNumberValue(att.getAv().getAn());
            _builder.append(_numberValue, "\t\t");
            _builder.append("));");
            _builder.newLineIfNotEmpty();
          }
        }
        _builder.append("\t\t");
        _builder.append("entities.add(");
        String _lowerCase_6 = entity.getName().toLowerCase();
        _builder.append(_lowerCase_6, "\t\t");
        _builder.append(");");
        _builder.newLineIfNotEmpty();
      }
    }
    _builder.append("\t\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence new_re(final Require req) {
    return this.new_logic(req.getLog());
  }
  
  public String generateComp(final Comparator op) {
    String _switchResult = null;
    boolean _matched = false;
    if (op instanceof Eq) {
      _matched=true;
      _switchResult = "==";
    }
    if (!_matched) {
      if (op instanceof Smaller) {
        _matched=true;
        _switchResult = "<";
      }
    }
    if (!_matched) {
      if (op instanceof Bigger) {
        _matched=true;
        _switchResult = ">";
      }
    }
    if (!_matched) {
      if (op instanceof SmallerEq) {
        _matched=true;
        _switchResult = "<=";
      }
    }
    if (!_matched) {
      if (op instanceof BiggerEq) {
        _matched=true;
        _switchResult = ">=";
      }
    }
    if (!_matched) {
      if (op instanceof NEq) {
        _matched=true;
        _switchResult = "!=";
      }
    }
    return _switchResult;
  }
  
  protected CharSequence _new_logic(final Or x) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("(");
    CharSequence _new_logic = this.new_logic(x.getLeft());
    _builder.append(_new_logic);
    _builder.append("||");
    CharSequence _new_logic_1 = this.new_logic(x.getRight());
    _builder.append(_new_logic_1);
    _builder.append(")");
    return _builder;
  }
  
  protected CharSequence _new_logic(final And x) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("(");
    CharSequence _new_logic = this.new_logic(x.getLeft());
    _builder.append(_new_logic);
    _builder.append("&&");
    CharSequence _new_logic_1 = this.new_logic(x.getRight());
    _builder.append(_new_logic_1);
    _builder.append(")");
    return _builder;
  }
  
  protected CharSequence _new_logic(final NumberComparing x) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("(");
    CharSequence _new_exp = this.new_exp(x.getLeft());
    _builder.append(_new_exp);
    String _generateComp = this.generateComp(x.getComp());
    _builder.append(_generateComp);
    CharSequence _new_exp_1 = this.new_exp(x.getRight());
    _builder.append(_new_exp_1);
    _builder.append(")");
    return _builder;
  }
  
  protected CharSequence _new_exp(final Add x) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("(");
    CharSequence _new_exp = this.new_exp(x.getLeft());
    _builder.append(_new_exp);
    _builder.append("+");
    CharSequence _new_exp_1 = this.new_exp(x.getRight());
    _builder.append(_new_exp_1);
    _builder.append(")");
    return _builder;
  }
  
  protected CharSequence _new_exp(final Sub x) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("(");
    CharSequence _new_exp = this.new_exp(x.getLeft());
    _builder.append(_new_exp);
    _builder.append("-");
    CharSequence _new_exp_1 = this.new_exp(x.getRight());
    _builder.append(_new_exp_1);
    _builder.append(")");
    return _builder;
  }
  
  protected CharSequence _new_exp(final Mult x) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("(");
    CharSequence _new_exp = this.new_exp(x.getLeft());
    _builder.append(_new_exp);
    _builder.append("*");
    CharSequence _new_exp_1 = this.new_exp(x.getRight());
    _builder.append(_new_exp_1);
    _builder.append(")");
    return _builder;
  }
  
  protected CharSequence _new_exp(final Div x) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("(");
    CharSequence _new_exp = this.new_exp(x.getLeft());
    _builder.append(_new_exp);
    _builder.append("/");
    CharSequence _new_exp_1 = this.new_exp(x.getRight());
    _builder.append(_new_exp_1);
    _builder.append(")");
    return _builder;
  }
  
  protected CharSequence _new_exp(final IntNum x) {
    return Integer.toString(x.getValue());
  }
  
  protected CharSequence _new_exp(final FloatNum x) {
    String _string = Integer.toString(x.getI());
    String _plus = (_string + ".");
    String _string_1 = Integer.toString(x.getDecimal());
    return (_plus + _string_1);
  }
  
  protected CharSequence _new_exp(final NameAttribute x) {
    String _xifexpression = null;
    if (((x.getAttribute().getAVal().getLTypes() != null) && x.getAttribute().getAVal().getLTypes().equals("Integer"))) {
      String _name = x.getAttribute().getName();
      String _plus = (("eData.get(" + "\"") + _name);
      String _plus_1 = (_plus + "\"");
      _xifexpression = (_plus_1 + ").intValue()");
    } else {
      String _xifexpression_1 = null;
      if (((x.getAttribute().getAVal().getLTypes() != null) && x.getAttribute().getAVal().getLTypes().equals("Float"))) {
        String _name_1 = x.getAttribute().getName();
        String _plus_2 = (("eData.get(" + "\"") + _name_1);
        String _plus_3 = (_plus_2 + "\"");
        _xifexpression_1 = (_plus_3 + ").floatValue()");
      } else {
        String _xifexpression_2 = null;
        if (((x.getAttribute().getAVal().getAn() != null) && (x.getAttribute().getAVal().getAn() instanceof IntNum))) {
          String _name_2 = x.getAttribute().getName();
          String _plus_4 = (("eData.get(" + "\"") + _name_2);
          String _plus_5 = (_plus_4 + "\"");
          _xifexpression_2 = (_plus_5 + ").intValue()");
        } else {
          String _xifexpression_3 = null;
          if (((x.getAttribute().getAVal().getAn() != null) && (x.getAttribute().getAVal().getAn() instanceof FloatNum))) {
            String _name_3 = x.getAttribute().getName();
            String _plus_6 = (("eData.get(" + "\"") + _name_3);
            String _plus_7 = (_plus_6 + "\"");
            _xifexpression_3 = (_plus_7 + ").floatValue()");
          } else {
            _xifexpression_3 = "Something went wrong";
          }
          _xifexpression_2 = _xifexpression_3;
        }
        _xifexpression_1 = _xifexpression_2;
      }
      _xifexpression = _xifexpression_1;
    }
    return _xifexpression;
  }
  
  protected Number _getNumberValue(final IntNum x) {
    return Integer.valueOf(x.getValue());
  }
  
  protected Number _getNumberValue(final FloatNum x) {
    Float _xblockexpression = null;
    {
      int _i = x.getI();
      String _plus = (Integer.valueOf(_i) + ".");
      int _decimal = x.getDecimal();
      final String floatstring = (_plus + Integer.valueOf(_decimal));
      _xblockexpression = Float.valueOf(floatstring);
    }
    return _xblockexpression;
  }
  
  public void generateLocations(final IFileSystemAccess2 fsa, final Locations locations) {
    fsa.generateFile("Location.java", this.generateLocation());
    fsa.generateFile("LocationData.java", this.generateLocationData());
    fsa.generateFile("LocationsInit.java", this.generateLocationInit(locations));
  }
  
  public CharSequence generateLocation() {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("public class Location {");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private List<LocationData> locations;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private static Location location;    ");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private Location(){");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("locations = new ArrayList<>();");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public static Location getInstance(){");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("if(location == null){");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("location = new Location();");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return location;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public List<LocationData> getLocations(){");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return this.locations;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public void addLocation(LocationData location){");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("locations.add(location);");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateLocationData() {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("public class LocationData {");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private Terrain terrain;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private String locationName;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private String team;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public class Terrain{");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("private String name;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("private String type;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("        ");
    _builder.append("public Terrain(String name, String type){");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("this.name = name;");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("this.type = type;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("        ");
    _builder.append("public String getName(){");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("return this.name;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("        ");
    _builder.append("public String getType(){");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("return this.type;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("        ");
    _builder.append("public void setName(String name){");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("this.name = name;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("        ");
    _builder.append("public void setType(String type){");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("this.type= type;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public LocationData(){}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public LocationData(Terrain terrain, String locationName, String team){");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.locationName = locationName;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.team = team;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.terrain = terrain;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public Terrain getTerrain() {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return this.terrain;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public void setTerrain(Terrain terrain) {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.terrain = terrain;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public String getLocationName() {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return this.locationName;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public void setLocationName(String locationName) {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.locationName = locationName;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public String getTeam() {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return this.team;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public void setTeam(String team) {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.team = team;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}\t\t");
    _builder.newLine();
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateLocationInit(final Locations locations) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("public class LocationsInit{");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public void addLocations(Location location){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("LocationData locationData;");
    _builder.newLine();
    {
      EList<Loc> _loc = locations.getLoc();
      for(final Loc location : _loc) {
        _builder.append("\t\t");
        _builder.append("locationData = new LocationData();");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append("locationData.setLocationName(\"");
        String _name = location.getName();
        _builder.append(_name, "\t\t");
        _builder.append("\");");
        _builder.newLineIfNotEmpty();
        _builder.append("\t\t");
        _builder.append("locationData.setTeam(\"");
        String _name_1 = location.getTeam().getName();
        _builder.append(_name_1, "\t\t");
        _builder.append("\");");
        _builder.newLineIfNotEmpty();
        _builder.append("\t\t");
        _builder.append("locationData.setTerrain(locationData.new Terrain(\"");
        String _name_2 = location.getTerrain().getName();
        _builder.append(_name_2, "\t\t");
        _builder.append("\", \"");
        String _name_3 = location.getTerrain().getEType().getType().getName();
        _builder.append(_name_3, "\t\t");
        _builder.append("\"));");
        _builder.newLineIfNotEmpty();
        _builder.append("\t\t");
        _builder.append("location.addLocation(locationData);");
        _builder.newLine();
      }
    }
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public void generateMoves(final IFileSystemAccess2 fsa, final Moves moves) {
    fsa.generateFile("Move.java", this.generateMove());
    fsa.generateFile("MoveEnum.java", this.generateMoveEnum(moves));
    fsa.generateFile("MoveInit.java", this.generateMoveInit(moves));
    fsa.generateFile("MoveData.java", this.generateMoveData());
  }
  
  public CharSequence generateMove() {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.newLine();
    _builder.append("public class Move{\t\t\t");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private static Move move;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private List<MoveData> moves = new ArrayList<>();");
    _builder.newLine();
    _builder.append("\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private Move(){}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public static Move getInstance(){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("if (move == null){");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("move = new Move();");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("return move;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public void addMove(MoveData move){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("moves.add(move);");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public MoveData getMove(String move){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("MoveData mD = null;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("for (MoveData moveData : moves) {");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("if(moveData.getMoveName().equals(move)){");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("mD = moveData;");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("return mD;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public List<MoveData> getMoves(){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("return moves;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateMoveData() {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("public class MoveData{");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private String moveName;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private String type;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private List<AttributeData> moveAttributes;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private List<EffectMove> moveEffects;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private List<EffectBuff> buffEffects;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public MoveData(){");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.moveAttributes = new ArrayList<>();");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("this.moveEffects = new ArrayList<>();");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("this.buffEffects = new ArrayList<>();");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public MoveData(String moveName, String type, List<AttributeData> moveAttributes, List<EffectMove> moveEffects, List<EffectBuff> buffEffects) {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.moveName = moveName;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.type = type;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.moveAttributes = moveAttributes;");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("this.moveEffects = moveEffects;");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("this.buffEffects = buffEffects;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public String getMoveName(){");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return this.moveName;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public void setMoveName(String moveName) {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.moveName = moveName;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public String getType() {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return this.type;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public void setType(String type) {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.type = type;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public List<AttributeData> getMoveAttributes() {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return this.moveAttributes;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public void setMoveAttributes(List<AttributeData> moveAttributes) {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("this.moveAttributes = moveAttributes;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public void addAttribute(AttributeData attribute){");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("moveAttributes.add(attribute);");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public List<EffectBuff> getBuffEffects(){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("return this.buffEffects;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public List<EffectMove> getMoveEffects(){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("return this.moveEffects;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public void addMoveEffect(EffectMove moveEffect){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("this.moveEffects.add(moveEffect);");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public void addBuffEffect(EffectBuff buffEffect){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("this.buffEffects.add(buffEffect);");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("@Override");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public boolean equals(Object o) {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("if (o == this)");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("return true;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("if (!(o instanceof MoveData)) {");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("return false;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("MoveData moveData = (MoveData) o;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return Objects.equals(moveName, moveData.moveName) && Objects.equals(type, moveData.type) && Objects.equals(moveAttributes, moveData.moveAttributes);");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("@Override");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public int hashCode() {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return Objects.hash(moveName, type, moveAttributes, moveEffects, buffEffects);");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("@Override");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public String toString() {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return getMoveName();");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateMoveEnum(final Moves moves) {
    CharSequence _xblockexpression = null;
    {
      String moveEnums = "";
      int i = 1;
      EList<Move> _move = moves.getMove();
      for (final Move move : _move) {
        {
          String name = move.getName();
          String type = move.getEType().getType().getName();
          String _moveEnums = moveEnums;
          moveEnums = (_moveEnums + name);
          String _moveEnums_1 = moveEnums;
          moveEnums = (_moveEnums_1 + (((("(" + "\"") + type) + "\"") + ")"));
          int _size = moves.getMove().size();
          boolean _lessThan = (i < _size);
          if (_lessThan) {
            String _moveEnums_2 = moveEnums;
            moveEnums = (_moveEnums_2 + ", ");
            i++;
          } else {
            String _moveEnums_3 = moveEnums;
            moveEnums = (_moveEnums_3 + ";");
          }
        }
      }
      StringConcatenation _builder = new StringConcatenation();
      _builder.append("enum MoveEnum{");
      _builder.newLine();
      _builder.append("    ");
      _builder.append(moveEnums, "    ");
      _builder.newLineIfNotEmpty();
      _builder.append("    ");
      _builder.append("private String type;");
      _builder.newLine();
      _builder.newLine();
      _builder.append("    ");
      _builder.append("private MoveEnum(String type){");
      _builder.newLine();
      _builder.append("        ");
      _builder.append("this.type = type;");
      _builder.newLine();
      _builder.append("    ");
      _builder.append("}");
      _builder.newLine();
      _builder.newLine();
      _builder.append("    ");
      _builder.append("public String getType(){");
      _builder.newLine();
      _builder.append("        ");
      _builder.append("return this.type;");
      _builder.newLine();
      _builder.append("    ");
      _builder.append("}");
      _builder.newLine();
      _builder.append("}");
      _builder.newLine();
      _xblockexpression = _builder;
    }
    return _xblockexpression;
  }
  
  public CharSequence generateMoveInit(final Moves moves) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("public class MoveInit{");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public void addMoves(Move moves){ //private Move moves = Move.getInstance()");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("MoveData tempMoveData;");
    _builder.newLine();
    {
      EList<Move> _move = moves.getMove();
      for(final Move move : _move) {
        _builder.append("\t\t");
        _builder.append("tempMoveData = new MoveData();");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append("tempMoveData.setMoveName(\"");
        String _name = move.getName();
        _builder.append(_name, "\t\t");
        _builder.append("\");");
        _builder.newLineIfNotEmpty();
        _builder.append("\t\t");
        _builder.append("tempMoveData.setType(\"");
        String _name_1 = move.getEType().getType().getName();
        _builder.append(_name_1, "\t\t");
        _builder.append("\");");
        _builder.newLineIfNotEmpty();
        {
          EList<AltAttribute> _att = move.getAtt();
          for(final AltAttribute att : _att) {
            _builder.append("\t\t");
            _builder.append("tempMoveData.addAttribute(new AttributeData(\"");
            String _name_2 = att.getAttribute().getName();
            _builder.append(_name_2, "\t\t");
            _builder.append("\", ");
            Number _numberValue = this.getNumberValue(att.getAv().getAn());
            _builder.append(_numberValue, "\t\t");
            _builder.append("));");
            _builder.newLineIfNotEmpty();
          }
        }
        {
          EList<MEffect> _mEffect = move.getMEffect();
          for(final MEffect moveEffect : _mEffect) {
            {
              if ((moveEffect != null)) {
                _builder.append("\t\t");
                _builder.append("tempMoveData.addMoveEffect(new EffectMove.");
                String _name_3 = moveEffect.getMoveEName().getName();
                _builder.append(_name_3, "\t\t");
                _builder.append("());");
                _builder.newLineIfNotEmpty();
              }
            }
          }
        }
        {
          EList<BEffect> _bEffect = move.getBEffect();
          for(final BEffect buffEffect : _bEffect) {
            {
              if ((buffEffect != null)) {
                _builder.append("\t\t");
                _builder.append("tempMoveData.addBuffEffect(new EffectBuff.");
                String _name_4 = buffEffect.getBuffEName().getName();
                _builder.append(_name_4, "\t\t");
                _builder.append("());");
                _builder.newLineIfNotEmpty();
              }
            }
          }
        }
        _builder.append("\t\t");
        _builder.append("moves.addMove(tempMoveData);");
        _builder.newLine();
      }
    }
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public void generateTeams(final IFileSystemAccess2 fsa, final Teams teams) {
    fsa.generateFile("Team.java", this.generateTeam(teams));
    fsa.generateFile("TeamInit.java", this.generateTeamInit(teams));
  }
  
  public String addTeamMemberString(final Team team) {
    String _xblockexpression = null;
    {
      String _name = team.getName();
      String _plus = (("team.addTeamMember(" + "\"") + _name);
      String _plus_1 = (_plus + "\"");
      String createTeamString = (_plus_1 + ", ");
      int i = 1;
      EList<Entity> _entity = team.getMembers().getEntity();
      for (final Entity e : _entity) {
        {
          String _createTeamString = createTeamString;
          String _name_1 = e.getName();
          String _plus_2 = (("findEntityByName(" + "\"") + _name_1);
          String _plus_3 = (_plus_2 + "\"");
          String _plus_4 = (_plus_3 + ", entities");
          String _plus_5 = (_plus_4 + ")");
          createTeamString = (_createTeamString + _plus_5);
          int _size = team.getMembers().getEntity().size();
          boolean _greaterThan = (_size > i);
          if (_greaterThan) {
            i++;
            String _createTeamString_1 = createTeamString;
            createTeamString = (_createTeamString_1 + ", ");
          } else {
            String _createTeamString_2 = createTeamString;
            createTeamString = (_createTeamString_2 + ");");
          }
        }
      }
      _xblockexpression = createTeamString;
    }
    return _xblockexpression;
  }
  
  public CharSequence generateTeam(final Teams teams) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("public class Team {");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private Map<String, List<Entity>> teams;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private List<String> teamNames;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("private final int teamSize = ");
    int _value = teams.getSize().getValue();
    _builder.append(_value, "    ");
    _builder.append(";");
    _builder.newLineIfNotEmpty();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public Team() {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("teams = new HashMap<>();");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("teamNames = new ArrayList<>(); ");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public List<Entity> getTeamByName(String name) {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("if (!teams.containsKey(name)) {");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("return null;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return teams.get(name);");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public void addTeamMember(String team, Entity... entity) {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("if (!teams.containsKey(team)) {");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("teams.put(team, entityAdder(entity));");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("teamNames.add(team);");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("} else {");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("teams.get(team).addAll(entityAdder(entity));");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public List<Entity> entityAdder(Entity... entity) {");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("List<Entity> eList = new ArrayList<>();");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("for (Entity entity2 : entity) {");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("Entity tempEntity = new Entity(entity2);");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("eList.add(tempEntity);");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return eList;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public Map<String, List<Entity>> getTeams(){");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return teams;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public List<Entity> getPlayerTeam(){");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return teams.get(teamNames.get(0));");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("    ");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public int getTeamSize(){");
    _builder.newLine();
    _builder.append("    \t");
    _builder.append("return this.teamSize;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public boolean checkPlayerEntities(){");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("int playerTeamSize = getPlayerTeam().size();");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("int deadEntities = 0;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("for (Entity entity : getPlayerTeam()) {");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("if(entity.getEntityState() == EntityState.DEAD) break;");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("deadEntities++;");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("if(deadEntities == playerTeamSize) return true;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return false;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("    ");
    _builder.append("public int playerEntitiesAlive(){");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("int alive = 0;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("for (Entity entity : getPlayerTeam()) {");
    _builder.newLine();
    _builder.append("            ");
    _builder.append("if(entity.getEntityState() != EntityState.DEAD) alive++;");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("        ");
    _builder.append("return alive;");
    _builder.newLine();
    _builder.append("    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateTeamInit(final Teams teams) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.newLine();
    _builder.append("public class TeamInit{");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public void createTeams(Team team, List<Entity> entities){");
    _builder.newLine();
    {
      EList<Team> _team = teams.getTeam();
      for(final Team team : _team) {
        _builder.append("\t\t");
        String _addTeamMemberString = this.addTeamMemberString(team);
        _builder.append(_addTeamMemberString, "\t\t");
        _builder.newLineIfNotEmpty();
      }
    }
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private Entity findEntityByName(String name, List<Entity> entities){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("for(Entity e : entities){");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("if(e.getName().equals(name)){");
    _builder.newLine();
    _builder.append("\t\t\t\t");
    _builder.append("return e;");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("return null;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.newLine();
    _builder.newLine();
    _builder.newLine();
    return _builder;
  }
  
  public void generateTypes(final IFileSystemAccess2 fsa, final Relations relations) {
    fsa.generateFile("Type.java", this.generateType());
    fsa.generateFile("TypeEnum.java", this.generateTypeEnum(relations));
    fsa.generateFile("TypeRelation.java", this.generateTypeRelation());
    fsa.generateFile("TypeRelationsInit.java", this.generateTypeInit(relations));
  }
  
  public CharSequence generateTypeRelation() {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.ArrayList;");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("public class TypeRelation {");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.newLine();
    _builder.append("\t\t    ");
    _builder.append("private ArrayList<String> weakAgainst;");
    _builder.newLine();
    _builder.append("\t\t    ");
    _builder.append("private ArrayList<String> strongAgainst;");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.newLine();
    _builder.append("\t\t    ");
    _builder.append("public TypeRelation(){");
    _builder.newLine();
    _builder.append("\t\t        ");
    _builder.append("weakAgainst = new ArrayList<>();");
    _builder.newLine();
    _builder.append("\t\t        ");
    _builder.append("strongAgainst = new ArrayList<>();");
    _builder.newLine();
    _builder.append("\t\t    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.newLine();
    _builder.append("\t\t    ");
    _builder.append("public void addStrongAgainst(String strong){");
    _builder.newLine();
    _builder.append("\t\t        ");
    _builder.append("strongAgainst.add(strong);");
    _builder.newLine();
    _builder.append("\t\t    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.newLine();
    _builder.append("\t\t    ");
    _builder.append("public void addWeakAgainst(String weak){");
    _builder.newLine();
    _builder.append("\t\t        ");
    _builder.append("weakAgainst.add(weak);");
    _builder.newLine();
    _builder.append("\t\t    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.newLine();
    _builder.append("\t\t    ");
    _builder.append("public ArrayList<String> getWeakAgainst(){");
    _builder.newLine();
    _builder.append("\t\t        ");
    _builder.append("return weakAgainst;");
    _builder.newLine();
    _builder.append("\t\t    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.newLine();
    _builder.append("\t\t    ");
    _builder.append("public ArrayList<String> getStrongAgainst(){");
    _builder.newLine();
    _builder.append("\t\t        ");
    _builder.append("return strongAgainst;");
    _builder.newLine();
    _builder.append("\t\t    ");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateTypeInit(final Relations relations) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.newLine();
    _builder.append("public class TypeRelationsInit{");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public void createRelations(Type type){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("TypeRelation tr;");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("String currentType;");
    _builder.newLine();
    {
      EList<Type> _type = relations.getType();
      for(final Type t : _type) {
        _builder.append("\t\t");
        _builder.append("tr = new TypeRelation();");
        _builder.newLine();
        _builder.append("\t\t");
        _builder.append("currentType = \"");
        String _name = t.getName();
        _builder.append(_name, "\t\t");
        _builder.append("\";");
        _builder.newLineIfNotEmpty();
        {
          TypeExpression _tExpression = t.getTExpression();
          boolean _tripleNotEquals = (_tExpression != null);
          if (_tripleNotEquals) {
            _builder.append("\t\t");
            _builder.append("tr.addStrongAgainst(\"");
            String _name_1 = t.getTExpression().getStrong().getName();
            _builder.append(_name_1, "\t\t");
            _builder.append("\");");
            _builder.newLineIfNotEmpty();
            {
              EList<Type> _strong2 = t.getTExpression().getStrong2();
              for(final Type better : _strong2) {
                _builder.append("\t\t");
                _builder.append("tr.addStrongAgainst(\"");
                String _name_2 = better.getName();
                _builder.append(_name_2, "\t\t");
                _builder.append("\");");
                _builder.newLineIfNotEmpty();
              }
            }
            _builder.append("\t\t");
            _builder.append("tr.addWeakAgainst(\"");
            String _name_3 = t.getTExpression().getWeak().getName();
            _builder.append(_name_3, "\t\t");
            _builder.append("\");");
            _builder.newLineIfNotEmpty();
            {
              EList<Type> _weak2 = t.getTExpression().getWeak2();
              for(final Type worse : _weak2) {
                _builder.append("\t\t");
                _builder.append("tr.addWeakAgainst(\"");
                String _name_4 = worse.getName();
                _builder.append(_name_4, "\t\t");
                _builder.append("\");");
                _builder.newLineIfNotEmpty();
              }
            }
          }
        }
        _builder.append("\t\t");
        _builder.append("type.addTypeRelation(currentType, tr);");
        _builder.newLine();
      }
    }
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateType() {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("import java.util.*;");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.newLine();
    _builder.append("public class Type{");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private List<String> types = new ArrayList<>();");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private HashMap<String, TypeRelation> typeRelations = new HashMap<>();");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private static Type type;");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("private Type(){}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public static Type getInstance(){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("if(type == null){");
    _builder.newLine();
    _builder.append("\t\t\t");
    _builder.append("type = new Type();");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("return type;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("\t\t\t\t\t");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public void addType(String type){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("types.add(type);");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public List<String> getTypes(){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("return types;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public void addTypeRelation(String typeString, TypeRelation tr){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("typeRelations.put(typeString, tr);");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.newLine();
    _builder.append("\t");
    _builder.append("public HashMap<String, TypeRelation> getTypeRelations(){");
    _builder.newLine();
    _builder.append("\t\t");
    _builder.append("return typeRelations;");
    _builder.newLine();
    _builder.append("\t");
    _builder.append("}");
    _builder.newLine();
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence generateTypeEnum(final Relations relations) {
    StringConcatenation _builder = new StringConcatenation();
    _builder.append("public enum TypeEnum{");
    _builder.newLine();
    {
      EList<Type> _type = relations.getType();
      for(final Type type : _type) {
        String _name = type.getName();
        _builder.append(_name);
        _builder.append(",");
        _builder.newLineIfNotEmpty();
      }
    }
    _builder.append("}");
    _builder.newLine();
    return _builder;
  }
  
  public CharSequence new_logic(final Proposition x) {
    if (x instanceof And) {
      return _new_logic((And)x);
    } else if (x instanceof NumberComparing) {
      return _new_logic((NumberComparing)x);
    } else if (x instanceof Or) {
      return _new_logic((Or)x);
    } else {
      throw new IllegalArgumentException("Unhandled parameter types: " +
        Arrays.<Object>asList(x).toString());
    }
  }
  
  public CharSequence new_exp(final Sum x) {
    if (x instanceof FloatNum) {
      return _new_exp((FloatNum)x);
    } else if (x instanceof IntNum) {
      return _new_exp((IntNum)x);
    } else if (x instanceof NameAttribute) {
      return _new_exp((NameAttribute)x);
    } else if (x instanceof Div) {
      return _new_exp((Div)x);
    } else if (x instanceof Mult) {
      return _new_exp((Mult)x);
    } else if (x instanceof Add) {
      return _new_exp((Add)x);
    } else if (x instanceof Sub) {
      return _new_exp((Sub)x);
    } else {
      throw new IllegalArgumentException("Unhandled parameter types: " +
        Arrays.<Object>asList(x).toString());
    }
  }
  
  public Number getNumberValue(final ActualNumbers x) {
    if (x instanceof FloatNum) {
      return _getNumberValue((FloatNum)x);
    } else if (x instanceof IntNum) {
      return _getNumberValue((IntNum)x);
    } else {
      throw new IllegalArgumentException("Unhandled parameter types: " +
        Arrays.<Object>asList(x).toString());
    }
  }
}
